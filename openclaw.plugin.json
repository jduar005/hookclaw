{
  "id": "hookclaw",
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "maxResults": {
        "type": "number",
        "default": 5,
        "description": "Maximum number of memory chunks to inject"
      },
      "minScore": {
        "type": "number",
        "default": 0.3,
        "description": "Minimum similarity score threshold (0-1)"
      },
      "maxContextChars": {
        "type": "number",
        "default": 4000,
        "description": "Maximum total characters of injected context"
      },
      "timeoutMs": {
        "type": "number",
        "default": 2000,
        "description": "Timeout for memory search in milliseconds"
      },
      "logInjections": {
        "type": "boolean",
        "default": true,
        "description": "Log when memories are injected into prompts"
      },
      "formatTemplate": {
        "type": "string",
        "enum": ["xml", "markdown"],
        "default": "xml",
        "description": "Format for injected context block"
      },
      "skipShortPrompts": {
        "type": "number",
        "default": 10,
        "description": "Skip prompts shorter than this many characters"
      },
      "cacheSize": {
        "type": "number",
        "default": 20,
        "description": "Max entries in the prompt dedup LRU cache"
      },
      "cacheTtlMs": {
        "type": "number",
        "default": 300000,
        "description": "Time-to-live for cached prompt results in milliseconds (default 5 min)"
      },
      "adaptiveResults": {
        "type": "boolean",
        "default": true,
        "description": "Vary result count based on score quality (high score = fewer results, low score = none)"
      },
      "halfLifeHours": {
        "type": "number",
        "default": 168,
        "description": "Temporal decay half-life in hours (default 1 week). Recent memories score higher. Set 0 to disable."
      },
      "skipPatterns": {
        "type": "array",
        "items": { "type": "string" },
        "default": null,
        "description": "Custom regex patterns (strings) for prompts to skip. Null uses built-in defaults."
      },
      "enableSkipPatterns": {
        "type": "boolean",
        "default": true,
        "description": "Enable intent-gating skip patterns (creative, procedural, meta prompts)"
      },
      "enableTemporalParsing": {
        "type": "boolean",
        "default": false,
        "description": "Parse temporal expressions (yesterday, last week) from prompts. Diagnostic-only: results are logged but not used for search filtering."
      },
      "enableFeedbackLoop": {
        "type": "boolean",
        "default": false,
        "description": "Enable agent_end feedback hook for utility score tracking"
      },
      "mmrLambda": {
        "type": "number",
        "default": 0.7,
        "description": "MMR diversity parameter (0=max diversity, 1=max relevance)"
      },
      "enableMmr": {
        "type": "boolean",
        "default": true,
        "description": "Enable MMR diversity filtering to remove redundant memories"
      },
      "fuzzyCacheThreshold": {
        "type": "number",
        "default": 0.85,
        "description": "Jaccard similarity threshold for fuzzy cache matching (0-1). Set 1.0 for exact-only."
      },
      "enableFts": {
        "type": "boolean",
        "default": true,
        "description": "Enable direct FTS5 keyword search to boost vector results"
      },
      "ftsBoostWeight": {
        "type": "number",
        "default": 0.3,
        "description": "Weight for FTS5 keyword boost added to vector score (0-1)"
      },
      "ftsDbPath": {
        "type": "string",
        "default": null,
        "description": "Override path to OpenClaw SQLite database. Null uses auto-discovery."
      },
      "ftsAgentId": {
        "type": "string",
        "default": "main",
        "description": "OpenClaw agent ID for database path resolution"
      },
      "debugLogging": {
        "type": "boolean",
        "default": false,
        "description": "Log detailed per-result info (prompt preview, path, score, FTS boost, snippet) to gateway logs. Use temporarily for tuning."
      }
    }
  }
}
